(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{189:function(t,e,n){var content=n(236);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(58).default)("51224583",content,!0,{sourceMap:!1})},190:function(t,e,n){var content=n(238);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(58).default)("c74797e2",content,!0,{sourceMap:!1})},214:function(t,e,n){var content=n(306);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(58).default)("03a92282",content,!0,{sourceMap:!1})},215:function(t,e,n){var content=n(308);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(58).default)("343a3b9a",content,!0,{sourceMap:!1})},235:function(t,e,n){"use strict";var r=n(189);n.n(r).a},236:function(t,e,n){(e=n(57)(!1)).push([t.i,".chat-container[data-v-61a86dfa]{display:-webkit-box;display:flex;padding:8px}.thumbnail-container[data-v-61a86dfa]{margin-right:16px}.thumbnail-container img[data-v-61a86dfa]{width:50px;height:50px;border-radius:10px}.user-name[data-v-61a86dfa]{font-weight:700}",""]),t.exports=e},237:function(t,e,n){"use strict";var r=n(190);n.n(r).a},238:function(t,e,n){(e=n(57)(!1)).push([t.i,".chats-container{padding:16px}",""]),t.exports=e},239:function(t,e,n){t.exports=n.p+"img/52a05e7.png"},305:function(t,e,n){"use strict";var r=n(214);n.n(r).a},306:function(t,e,n){(e=n(57)(!1)).push([t.i,".input-container[data-v-28031fcd]{padding:10px;height:100%;display:-webkit-box;display:flex}.avatar[data-v-28031fcd]{height:100%;width:auto}textarea[data-v-28031fcd]{width:100%;height:100%}.image-container[data-v-28031fcd]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center}img[data-v-28031fcd]{width:70%;cursor:pointer}",""]),t.exports=e},307:function(t,e,n){"use strict";var r=n(215);n.n(r).a},308:function(t,e,n){(e=n(57)(!1)).push([t.i,".container[data-v-5725717c]{height:100%}.chats-layout[data-v-5725717c]{overflow:scroll;height:90%}.input-layout[data-v-5725717c]{height:10%}",""]),t.exports=e},310:function(t,e,n){"use strict";n.r(e);n(59),n(28),n(19),n(14),n(41);var r=n(25),o=(n(60),{props:["message"],data:function(){return{message:{text:"今日も良い天気ですね",user:{thumbnail:"https://pbs.twimg.com/profile_images/1131882065337602049/0JRUGd3S_400x400.jpg",name:"note"}}}},computed:{displayName:function(){return"@".concat(this.message.user.name)}}}),c=(n(235),n(20)),l={props:["messages"],components:{Message:Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-container"},[n("div",{staticClass:"thumbnail-container"},[n("img",{attrs:{src:t.message.user.thumbnail}})]),t._v(" "),n("div",{staticClass:"message-container"},[n("div",{staticClass:"user-name"},[t._v(t._s(t.displayName))]),t._v(" "),n("div",{staticClass:"message"},[t._v(t._s(t.message.text))])])])}),[],!1,null,"61a86dfa",null).exports},mounted:function(){console.log(this.messages)}},d=(n(237),Object(c.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chats-container"},this._l(this.messages,(function(t){return e("message",{attrs:{message:t}})})),1)}),[],!1,null,null,null).exports),f=n(36),h=n(1),m=n(37),v=n(240),y=n.n(v);n(300);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}h.default.use(y.a);var O={data:function(){return{dialogVisible:!1,text:null}},computed:{user:function(){return this.$store.state.user},isAuthenticated:function(){return this.$store.getters.isAuthenticated}},methods:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(m.b)(["setUser"]),{openLoginModal:function(){this.dialogVisible=!0},addMessage:function(t){var e=this;if(!this.keyDownedForJPConversion(t)){var n=this.$route.params.id;f.a.collection("channels").doc(n).collection("messages").add({text:this.text,createdAt:(new Date).getTime(),user:{name:this.user.displayName,thumbnail:this.user.photoURL}}).then((function(){e.text=null}))}},keyDownedForJPConversion:function(t){return 229===t.keyCode},login:function(){var t=this,e=new f.b.auth.GoogleAuthProvider;f.b.auth().signInWithPopup(e).then((function(e){var n=e.user;t.setUser(n),console.log(t.$store.state.user),t.dialogVisible=!1})).catch((function(t){window.alert(t)}))}})};n(305);function w(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var j={components:{Messages:d,ChatForm:Object(c.a)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-container"},[t.isAuthenticated?r("img",{staticClass:"avatar",attrs:{src:t.user.photoURL}}):t._e(),t._v(" "),t.isAuthenticated?r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],domProps:{value:t.text},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addMessage(e)},input:function(e){e.target.composing||(t.text=e.target.value)}}}):r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],domProps:{value:t.text},on:{click:t.openLoginModal,input:function(e){e.target.composing||(t.text=e.target.value)}}}),t._v(" "),r("el-dialog",{attrs:{title:"",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("div",{staticClass:"image-container"},[r("img",{attrs:{src:n(239)},on:{click:t.login}})])])],1)}),[],!1,null,"28031fcd",null).exports},data:function(){return{messages:[]}},mounted:function(){var t=this,e=this.$route.params.id;f.a.collection("channels").doc(e).collection("messages").orderBy("createdAt").onSnapshot((function(e){e.docChanges().forEach((function(e){var n=e.doc;"added"===e.type&&t.messages.push(function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({id:n.id},n.data()))}))}))}},P=(n(307),Object(c.a)(j,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("div",{staticClass:"chats-layout"},[e("messages",{attrs:{messages:this.messages}})],1),this._v(" "),e("div",{staticClass:"input-layout"},[e("chat-form")],1)])}),[],!1,null,"5725717c",null));e.default=P.exports}}]);